<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">

    <!-- <link rel="stylesheet" type="text/css" href="/styles/styles.css"> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="style/style.css">
    <script src="js/login.js"></script>

</head>

<body>

    <div>
        <form id="login-form">
            <label>UserName</label><br>
            <input type="text" size="10" id="username-input" placeholder="username" name="username-input">
            <input type="text" size="10" id="password-input" placeholder="password" name="password-input">
            <input type="submit" id="login-submit" value="Create User">
        </form>

        <h6 id="error-message"></h6>
    </div>


    <script type="application/javascript">




        $("#login-form").submit(function (e) {



            var url = 'http://localhost:3000/createUser';

            let username = document.getElementById("username-input").value;
            let password = document.getElementById("password-input").value;

            let user = {};
            user.name = username;
            user.password = password;

            console.log("post")
            console.log(user)



            $.ajax
                ({
                    type: "POST",
                    url: url,
                    dataType: 'json',
                    async: true,
                    data: user,
                    success: (data, textStatus, xhr) => {
                        console.log('response: ' + data)
                        console.log("xhr: " + xhr.status)

                        if (xhr.status === 200) {
                            console.log(xhr.status)
                            window.location = 'http://localhost:3000/'
                        } else {

                            $('#error-message').empty().append("error");

                        }

                    }
                });
            e.preventDefault();
        });


    </script>


</body>

</html>